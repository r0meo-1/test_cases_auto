# test_cases_auto
Демонстрация тест кейсов на проекте "Конвертация валют" (Хакатон от яндекс Практикум)
1. Локальный запуск проекта
ID: TC-001
Название: Успешный запуск проекта локально.
Описание: Проверка того, что проект успешно запускается локально через Docker.
Предварительные условия:
Docker и Docker Compose установлены.
Файл .env настроен на основе .env.example.
Шаги:
Клонировать проект:
git clone https://github.com/hackathon-team-2/currency-converter-backend.git
cd currency-converter-backend
Выполнить команду docker compose up --build.
Дождаться запуска всех контейнеров.
Выполнить миграции:
docker compose exec backend python manage.py migrate
Открыть в браузере URL: 
Ожидаемый результат:
Проект успешно запущен.
Swagger-документация доступна по указанному адресу. 
Фактический результат:
Проект успешно запущен, Swagger доступен. True

2. Проверка API конверсии валют
ID: TC-002
Название: Успешная конвертация валют.
Описание: Проверка, что API корректно обрабатывает запрос на конвертацию валют.
Предварительные условия:
Проект запущен локально.
Шаги:
Отправить запрос к API:
GET /api/convert?from=USD&to=RUB&amount=125
Проверить статус-код ответа.
Проверить содержимое ответа.
Ожидаемый результат:
Статус-код: 200 OK.
Ответ должен содержать корректные данные для конверсии:
{
  "info": {"rate": 100.0191775342},
  "query": {"amount": "125", "from": "USD", "to": "RUB"},
  "result": 12502.397191775
}
Фактический результат:
Статус-код: 200 OK, возвращен ожидаемый результат. True

3. Некорректные параметры API
ID: TC-003
Название: Проверка обработки некорректных запросов.
Описание: Убедиться, что API корректно возвращает ошибку при некорректных параметрах.
Шаги:
Отправить запрос с несуществующей валютой:
GET /api/convert?from=QQQ&to=USD&amount=100
Проверить статус-код ответа.
Проверить сообщение об ошибке в теле ответа.
Ожидаемый результат:
Статус-код: 400 Bad Request.
Сообщение об ошибке: {"detail": "Invalid currency: QQQ"}.
Фактический результат:
Статус-код: 400 Bad Request, возвращена ошибка "Invalid currency: QQQ". True

4. Проверка кэширования запросов
ID: TC-004
Название: Запросы с одинаковыми параметрами должны использовать данные из кэша.
Описание: Проверка, что одинаковые запросы к API быстрее обрабатываются при наличии кэша.
Шаги:
Отправить запрос:
GET /api/convert?from=USD&to=EUR&amount=500
Замерить время обработки первого запроса.
Отправить запрос с идентичными параметрами повторно.
Сравнить время выполнения.
Ожидаемый результат:
Время выполнения второго запроса значительно меньше первого.
Фактический результат:
Кэш работает, время второго выполнения меньше. True

5. Админка
ID: TC-005
Название: Доступ к админке.
Описание: Убедиться, что раздел админки доступен и функционален.
Предварительные условия:
Суперпользователь создан через команду:
docker compose exec backend python manage.py createsuperuser
Шаги:
Открыть админку по адресу: 
Войти под учетными данными суперпользователя.
Проверить список моделей.
Создать тестовый объект (например, пользователя).
Удалить тестовый объект.
Ожидаемый результат:
Админка доступна по указанному адресу.
Все модели отображаются корректно.
Объекты успешно создаются и удаляются.
Фактический результат:
Админка доступна, проверка функциональности успешна. True

6. Производительность
ID: TC-006
Название: Нагрузочное тестирование API.
Описание: Проверка стабильности API под высокой нагрузкой.
Шаги:
Отправить 1000 одновременных запросов к API через инструмент (например, Apache Benchmark или JMeter):
ab -n 1000 -c 50 "http://127.0.0.1:8000/api/convert?from=USD&to=RUB&amount=1000"
Проверить доступность API.
Ожидаемый результат:
Все запросы выполняются без ошибок.
Среднее время ответа на запрос не превышает 1 секунды.
Фактический результат:
Загрузка обработана успешно, ошибок нет. True

7. Проверка лимита API freecurrencyapi
ID: TC-007
Название: Обработка превышения лимита запросов к freecurrencyapi.
Описание: Проверка, что приложение корректно обрабатывает лимит стороннего API.
Шаги:
Истощить лимит запросов к freecurrencyapi.
Отправить запрос к API проекта на конвертацию валют.
Ожидаемый результат:
Статус-код: 503 Service Unavailable.
Сообщение об ошибке: {"detail": "API limit reached. Please try again later."}.
Фактический результат:
Лимит обрабатывается корректно, возвращена ошибка 503 Service Unavailable. True

8. Проверка Telegram-уведомлений
ID: TC-008
Название: Успешная отправка Telegram-уведомления при успешном деплое.
Описание: Проверка, что бот отправляет уведомление в Telegram при успешном обновлении кода на сервере через GitHub Actions.
Шаги:
Выполнить push изменений в основную ветку.
Дождаться успешного выполнения GitHub Actions.
Проверить Telegram-аккаунт.
Ожидаемый результат:
Бот отправляет сообщение:
Деплой завершен успешно. Сервис доступен по адресу https://currency-converter-livid-alpha.vercel.app/
Фактический результат:
Сообщение в Telegram доставлено. True
9. Проверка работы с малым значением суммы
ID: TC-009
Название: Конвертация минимального значения amount.
Описание: Убедиться, что API обрабатывает запросы с маленьким значением суммы (например, 0.01).
Шаги:
Отправить запрос:
GET /api/convert?from=EUR&to=USD&amount=0.01
Проверить статус-код ответа.
Проверить значение конверсии.
Ожидаемый результат:
Статус-код: 200 OK.
Ответ должен содержать точный результат, рассчитанный на основе актуального курса.
Фактический результат:
Статус-код: 200 OK, возвращено корректное значение конверсии. True

10. Проверка обработки частичных значений
ID: TC-010
Название: Конвертация дробных значений суммы amount.
Описание: Проверка того, что приложение корректно обрабатывает дробные значения суммы, например 5.5.
Шаги:
Отправить запрос:
GET /api/convert?from=EUR&to=USD&amount=5.5
Проверить статус-код ответа.
Проверить точность результата с учетом дробного значения.
Ожидаемый результат:
Статус-код: 200 OK.
Ответ должен учитывать дробное значение суммы.
Фактический результат:
Статус-код: 200 OK, конвертация выполнена правильно для дробного значения. True

11. Проверка несуществующего маршрута
ID: TC-011
Название: Запрос к несуществующему маршруту.
Описание: Убедиться, что сервер возвращает ошибку 404 при попытке обращения к несуществующему маршруту.
Шаги:
Отправить запрос к маршруту:
GET /api/unknown-route
Проверить статус-код ответа.
Проверить описание ошибки в теле ответа.
Ожидаемый результат:
Статус-код: 404 Not Found.
Сообщение: {"detail": "Not found."}.
Фактический результат:
Статус-код: 404 Not Found, отображено корректное сообщение об ошибке. True

12. Проверка валидации параметра amount
ID: TC-012
Название: Невалидное значение параметра amount.
Описание: Проверка ошибки при вводе параметра amount, который не является числом.
Шаги:
Отправить запрос:
GET /api/convert?from=EUR&to=USD&amount=abc
Проверить статус-код ответа.
Проверить описание ошибки.
Ожидаемый результат:
Статус-код: 400 Bad Request.
Сообщение об ошибке: {"detail": "Invalid parameter: amount must be numeric."}.
Фактический результат:
Статус-код: 400 Bad Request, ошибка отображается корректно. True

13. Проверка поддержки регистронезависимости валют
ID: TC-013
Название: Регистронезависимость параметров from и to.
Описание: Проверить, что параметры from и to принимаются в любом регистре (например, usd, Usd, USD).
Шаги:
Отправить запрос:
GET /api/convert?from=usd&to=EUR&amount=100
Отправить запрос для проверки другого регистра:
GET /api/convert?from=USD&to=eur&amount=100
Сравнить оба ответа.
Ожидаемый результат:
Статус-код: 200 OK.
Ответы идентичны для обоих запросов и корректны.
Фактический результат:
Статус-код: 200 OK, ответы одинаковы, конвертация работает независимо от регистра. True

14. Обработка большого значения amount
ID: TC-014
Название: Конвертация большой суммы.
Описание: Убедиться, что API корректно обрабатывает запросы с большими значениями суммы (например, 100000000).
Шаги:
Отправить запрос:
GET /api/convert?from=USD&to=GBP&amount=100000000
Проверить статус-код ответа.
Проверить результат конверсии.
Ожидаемый результат:
Статус-код: 200 OK.
Конвертация выполняется без ошибок и возвращается корректный результат.
Фактический результат:
Статус-код: 200 OK, конвертация успешна, результат реалистичен. True

15. Проверка исправности кросс-доменных запросов (CORS)
ID: TC-015
Название: Проверка CORS (Кросс-доменные запросы).
Описание: Проверка того, что фронтенд может отправлять запросы к бэкенду без ошибок CORS.
Шаги:
Перейти на опубликованное приложение (фронтенд).
Отправить запрос на конвертацию валют с пользовательского интерфейса.
Проверить в DevTools браузера раздел "Network" на наличие ошибок CORS.
Ожидаемый результат:
Запрос к API успешно обрабатывается.
Ошибок CORS в браузере нет.
Фактический результат:
Фронтенд корректно обращается к бэкенду, ошибок CORS не обнаружено. True

16. Проверка полного цикла: Фронтенд ↔ Бэкенд
ID: TC-016
Название: Сценарий полного взаимодействия.
Описание: Проверка взаимодействия между фронтендом и бэкендом.
Шаги:
Перейти на опубликованное приложение:
https://currency-converter-livid-alpha.vercel.app/
Выбрать валюту "USD" и указать сумму "100".
Нажать на кнопку "Конвертировать".
Проверить отображение результата на UI (например, в поле результата).
Ожидаемый результат:
Фронтенд показывает результат, полученный от API бэкенда.
Ошибки не наблюдаются.
Фактический результат:
Результат конверсии отображается корректно. True

17. Проверка конверсии одинаковых валют
ID: TC-017
Название: Конвертация валюты в ту же валюту.
Описание: Проверить, что при попытке конвертировать валюту в саму себя API возвращает исходное значение суммы.
Шаги:
Отправить запрос:
GET /api/convert?from=USD&to=USD&amount=100
Проверить статус-код ответа.
Убедиться, что сумма не изменена, так как валюты одинаковы.
Ожидаемый результат:
Статус-код: 200 OK.
Конечный результат равен введенной сумме (result = 100).
Фактический результат:
Статус-код: 200 OK, сумма вернулась без изменений. True

18. Проверка правильной обработки ISO-кодов валют
ID: TC-018
Название: Проверка поддержаиваемых ISO-кодов валют.
Описание: Убедиться, что API корректно обрабатывает запросы всех поддерживаемых валют, перечисленных в справочной информации.
Шаги:
Выполнить запрос, используя несколько поддерживаемых валют, например: 
from=USD&to=EUR&amount=50
from=GBP&to=JPY&amount=1000
from=AUD&to=CAD&amount=200
Ожидаемый результат:
Статус-код: 200 OK на все запросы.
Результат рассчитывается корректно для всех поддерживаемых валют.
Фактический результат:
API поддерживает все проверенные валюты. True

19. Проверка обращения при отсутствии переменных окружения
ID: TC-019
Название: Проверка поведения приложения при отсутствии файла .env.
Описание: Убедиться, что приложение не запускается или корректно сообщает об ошибке при отсутствии важных переменных окружения (например, API ключа для freecurrencyapi).
Шаги:
Удалить/переименовать файл .env.
Перезапустить контейнер с приложением.
Ожидаемый результат:
Приложение не запускается, возвращает корректное сообщение об ошибке.
Фактический результат:
Приложение ожидаемо не запущено, ошибка о недостающих конфигурациях отображена. True

20. Проверка обновления данных кэширования валют
ID: TC-020
Название: Автоматическое обновление курса валют.
Описание: Убедиться, что курс валют обновляется через заданный промежуток времени (например, каждый час).
Шаги:
Сделать запрос для проверки курсов:
GET /api/convert?from=USD&to=EUR&amount=100
Дождаться следующего периода обновления кэша (например, 1 час).
Повторить запрос и сравнить курс с предыдущим результатом.
Ожидаемый результат:
Курсы валют обновляются автоматически, если произошли изменения с источника данных API.
Фактический результат:
Курсы валют успешно обновляются. True

21. Проверка отправки слишком большого количества запросов
ID: TC-021
Название: Ограничение отправки большого количества запросов.
Описание: Проверить ограничения приложения на частоту запросов, чтобы избежать превышения лимита стороннего API.
Шаги:
Отправить 100 запросов с интервалом менее 1 секунды.
Проверить, как приложение обрабатывает такие обращения.
Ожидаемый результат:
Некоторые запросы могут быть отклонены (в общем случае статус-коды 429 Too Many Requests).
Фактический результат:
Чрезмерная частота запросов ограничивается корректно. True

22. Проверка обработки отрицательных значений суммы
ID: TC-022
Название: Конвертация отрицательного значения amount.
Описание: Убедиться, что приложение отклоняет запросы с отрицательными значениями суммы.
Шаги:
Отправить запрос:
GET /api/convert?from=USD&to=EUR&amount=-100
Проверить статус-код ответа.
Проверить сообщение об ошибке в ответе.
Ожидаемый результат:
Статус-код: 400 Bad Request.
Сообщение об ошибке: {"detail": "Amount must be a positive number."}.
Фактический результат:
API корректно отклонило запрос, отобразило сообщение об ошибке. True

23. Тестирование невалидного токена API (freecurrencyapi)
ID: TC-023
Название: Невалидный токен стороннего API.
Описание: Проверить поведение приложения, если токен для freecurrencyapi указан неверно.
Шаги:
В файле .env указать невалидный API-ключ для стороннего API.
Перезапустить контейнер.
Отправить запрос на конвертацию валют.
Ожидаемый результат:
Приложение не может получить данные от API и возвращает сообщение об ошибке с соответствующим статус-кодом (503 Service Unavailable).
Фактический результат:
Приложение вернуло сообщение о проблеме с API-ключом. True

24. Тестирование отсутствия подключения к интернету
ID: TC-024
Название: Проверка работы приложения без подключения к интернету.
Описание: Проверить, как приложение обрабатывает отсутствие подключения к интернету, пытаясь запросить данные у стороннего сервиса.
Шаги:
Отключить доступ сервера к интернету.
Отправить запрос на конвертацию валют.
Ожидаемый результат:
Приложение возвращает сообщение об ошибке с пояснением, что данные недоступны из-за проблем с подключением. Статус-код: 503 Service Unavailable.
Фактический результат:
Сообщение об отсутствии соединения с API возвращено корректно. True

25. Проверка работы на мобильных устройствах
ID: TC-025
Название: Проверка корректного отображения на мобильных устройствах.
Описание: Убедиться, что фронтенд-приложение адаптировано для мобильных устройств.
Шаги:
Открыть опубликованное приложение на мобильном устройстве.
Провести базовое тестирование функциональности (выбор валют, ввод суммы, конвертация, отображение результата).
Ожидаемый результат:
Интерфейс корректно  не отображается.
Все функции работают без сбоев.
Фактический результат:
Приложение не адаптировано под мобильные устройства, корректность подтверждена. False

